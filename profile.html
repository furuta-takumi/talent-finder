<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è©³ç´°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="theme.js"></script>
    <script src="data.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-secondary-50 min-h-screen pb-20">

    <header class="bg-secondary-800 text-white border-b-4 border-secondary-600 sticky top-0 z-50 h-16 flex items-center px-6 justify-between shadow-lg">
        <a href="dashboard.html" class="flex items-center gap-2 text-secondary-300 hover:text-white transition group">
            <div class="p-1 rounded-full border border-secondary-500 group-hover:bg-secondary-700 transition">
                <svg class="w-4 h-4 transform group-hover:-translate-x-0.5 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
            </div>
            <span class="font-bold text-sm tracking-widest">ä¸€è¦§ã«æˆ»ã‚‹</span>
        </a>
        <h1 class="font-bold text-xl tracking-widest" style="font-family: 'Zen Maru Gothic'">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è©³ç´°</h1>
        <div class="w-8"></div>
    </header>

    <main class="w-[96%] max-w-[1800px] mx-auto p-4 lg:p-8 grid grid-cols-1 lg:grid-cols-12 gap-8" id="profile-content">
        </main>

    <script>
        const userId = getUserIdFromUrl();
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ID:1ã‚’è¡¨ç¤º
        const user = users.find(u => u.id == userId) || users[0];

        // ãƒªãƒ³ã‚¯ç”Ÿæˆãƒ˜ãƒ«ãƒ‘ãƒ¼
        const createLink = (type, value) => `dashboard.html?${type}=${encodeURIComponent(value)}`;

        // â˜…â˜…â˜… ãƒ¡ãƒ¢æ©Ÿèƒ½ã®ä¿å­˜/èª­ã¿è¾¼ã¿ â˜…â˜…â˜…
        const memoKey = `tf_memo_${user.id}`; // ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã”ã¨ã«ä¿å­˜å ´æ‰€ã‚’å¤‰ãˆã‚‹

        function loadMemo() {
            return localStorage.getItem(memoKey) || "";
        }

        function saveMemo() {
            const memoText = document.getElementById('my-memo-area').value;
            localStorage.setItem(memoKey, memoText);
            
            // ä¿å­˜å®Œäº†æ¼”å‡º
            const btn = document.getElementById('save-memo-btn');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<span>âœ…</span> ä¿å­˜ã—ã¾ã—ãŸ';
            btn.classList.add('bg-success-600', 'text-white', 'border-transparent');
            btn.classList.remove('bg-yellow-100', 'text-yellow-800', 'border-yellow-300');
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.classList.remove('bg-success-600', 'text-white', 'border-transparent');
                btn.classList.add('bg-yellow-100', 'text-yellow-800', 'border-yellow-300');
            }, 2000);
        }

        const container = document.getElementById('profile-content');

        // HTMLæç”»ï¼ˆå·¦ã‚µã‚¤ãƒ‰å›ºå®šãƒ»å³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼‰
        container.innerHTML = `
            <aside class="lg:col-span-3">
                <div class="sticky top-24 space-y-6">
                    
                    <div class="bg-white rounded p-6 shadow-floating transform -rotate-1 border-t-8 border-primary-500 relative">
                        <div class="pin-tack" style="top: -15px; left: 50%; transform: translateX(-50%); background: radial-gradient(circle at 30% 30%, #a5b4fc, #6366f1);"></div>
                        
                        <div class="flex flex-col items-center text-center">
                            <div class="p-2 bg-secondary-50 border border-secondary-200 shadow-inner rounded-full mb-4">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=${user.id}&backgroundColor=b6e3f4" class="w-32 h-32 rounded-full bg-white object-cover">
                            </div>
                            
                            <h1 class="text-2xl font-bold text-secondary-800 mb-1" style="font-family: 'Zen Maru Gothic'">${user.name}</h1>
                            <p class="text-secondary-500 font-bold tracking-widest text-xs mb-4">${user.kana}</p>
                            
                            <div class="w-full space-y-2 mb-6">
                                <div class="bg-secondary-50 py-2 px-3 rounded border border-secondary-100 text-sm font-bold text-secondary-600">
                                    ğŸ¢ ${user.dept}
                                </div>
                                <div class="bg-secondary-50 py-2 px-3 rounded border border-secondary-100 text-sm font-bold text-secondary-600">
                                    ğŸ“ ${user.role}
                                </div>
                            </div>

                            <a href="https://teams.microsoft.com/l/chat/0/0?users=${user.email}" target="_blank" class="w-full py-3 bg-[#464775] text-white font-bold text-sm rounded shadow hover:bg-[#3b3c66] hover:shadow-lg transition flex items-center justify-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
                                Teamsã§é€£çµ¡
                            </a>
                            <p class="text-[10px] text-secondary-400 mt-2">â€»ç›¸æ‰‹ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹(${user.email})ã§<br>Teamsãƒãƒ£ãƒƒãƒˆã‚’é–‹ãã¾ã™</p>
                        </div>
                    </div>

                    <div class="bg-yellow-100 p-4 rounded shadow-md border border-yellow-200 relative transform rotate-1">
                        <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 w-20 h-6 bg-yellow-200/50 rotate-1 tape"></div>
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="font-bold text-yellow-800 flex items-center gap-1 text-sm">
                                <span>ğŸ–Šï¸</span> æ°—ã¥ããƒ¡ãƒ¢
                            </h3>
                            <span class="text-[10px] bg-yellow-200 text-yellow-800 px-2 py-0.5 rounded-full font-bold">éå…¬é–‹</span>
                        </div>
                        <textarea id="my-memo-area" 
                            class="w-full h-32 bg-yellow-50/50 border-2 border-yellow-200 rounded p-2 text-sm text-yellow-900 placeholder-yellow-800/40 focus:outline-none focus:border-yellow-400 focus:bg-white transition resize-none leading-relaxed" 
                            placeholder="é¢è«‡ã®è¨˜éŒ²ã‚„&#13;&#10;å°è±¡ãªã©ã‚’ãƒ¡ãƒ¢...">${loadMemo()}</textarea>
                        <div class="flex justify-end mt-2">
                            <button id="save-memo-btn" onclick="saveMemo()" class="flex items-center gap-1 px-3 py-1 bg-yellow-100 border border-yellow-300 text-yellow-800 rounded text-xs font-bold hover:bg-yellow-200 transition shadow-sm">
                                ä¿å­˜
                            </button>
                        </div>
                    </div>
                </div>
            </aside>

            <div class="lg:col-span-9 space-y-8">
                
                <div class="bg-white p-8 rounded shadow-paper relative">
                    <h3 class="font-bold text-lg text-secondary-700 mb-4 flex items-center gap-2 border-b-2 border-secondary-100 pb-2">
                        <span class="text-2xl">ğŸ˜Š</span> è‡ªå·±ç´¹ä»‹ãƒ»PR
                    </h3>
                    <div class="text-secondary-700 text-base leading-8 whitespace-pre-line font-medium bg-secondary-50/30 p-6 rounded border-l-4 border-secondary-300">
                        ${user.bio}
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded shadow-paper relative">
                        <div class="absolute -top-3 left-6 w-24 h-8 bg-secondary-200/50 -rotate-1 tape"></div>
                        <h3 class="font-bold text-lg text-secondary-700 mb-4 flex items-center gap-2">
                            <span class="text-xl">ğŸ’»</span> å¾—æ„ãªã‚¹ã‚­ãƒ«
                        </h3>
                        <div class="flex flex-wrap gap-2">
                            ${user.skills.map(skill => 
                                `<a href="${createLink('skill', skill)}" class="px-3 py-1.5 rounded bg-primary-50 text-primary-700 text-sm font-bold border-b-2 border-primary-100 hover:border-primary-300 hover:-translate-y-0.5 transition cursor-pointer"># ${skill}</a>`
                            ).join('')}
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded shadow-paper relative">
                        <div class="absolute -top-3 right-6 w-24 h-8 bg-secondary-200/50 rotate-1 tape"></div>
                        <h3 class="font-bold text-lg text-secondary-700 mb-4 flex items-center gap-2">
                            <span class="text-xl">ğŸ…</span> ä¿æœ‰è³‡æ ¼
                        </h3>
                        <ul class="grid grid-cols-1 gap-3">
                            ${user.certs.map(cert => `
                                <li>
                                    <a href="${createLink('cert', cert)}" class="flex items-center gap-3 p-3 rounded bg-accent-50 border border-accent-100 hover:bg-accent-100 transition group">
                                        <span class="w-6 h-6 flex-shrink-0 flex items-center justify-center bg-accent-400 text-white rounded-full text-xs font-bold group-hover:scale-110 transition">â˜…</span>
                                        <span class="text-sm font-bold text-secondary-700">${cert}</span>
                                    </a>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded shadow-paper relative">
                        <h3 class="font-bold text-lg text-secondary-700 mb-4 flex items-center gap-2">
                            <span class="text-xl">â›º</span> è¶£å‘³ãƒ»ãƒãƒã£ã¦ã„ã‚‹ã“ã¨
                        </h3>
                         <div class="flex flex-wrap gap-2">
                            ${user.hobbies.map(hobby => 
                                `<a href="${createLink('hobby', hobby)}" class="px-3 py-1.5 rounded bg-success-50 text-success-700 text-sm font-bold border-b-2 border-success-100 hover:border-success-300 hover:-translate-y-0.5 transition cursor-pointer">ğŸµ ${hobby}</a>`
                            ).join('')}
                        </div>
                    </div>
                </div>

                <div class="bg-white p-8 rounded shadow-paper relative">
                    <h3 class="font-bold text-lg text-secondary-700 mb-6 flex items-center gap-2">
                        <span class="text-xl">ğŸ“œ</span> ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ»çµŒæ­´
                    </h3>
                    <div class="relative border-l-4 border-secondary-200 ml-2 space-y-10 pl-8 pb-2">
                        <div class="relative">
                            <span class="absolute -left-[41px] top-1 w-5 h-5 rounded-full border-4 border-white bg-primary-500 shadow-sm"></span>
                            <h4 class="font-bold text-secondary-800 text-lg">ç¾åœ¨: ${user.dept}</h4>
                            <p class="text-sm text-secondary-500 mb-2">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ¼ãƒ€ãƒ¼ã¨ã—ã¦å¾“äº‹</p>
                            <p class="text-sm text-secondary-600 bg-secondary-50 p-4 rounded border-l-4 border-primary-300 italic">
                                "ç¾åœ¨å–ã‚Šçµ„ã‚“ã§ã„ã‚‹ã“ã¨ã‚„ã€ç›´è¿‘ã®ç›®æ¨™ãªã©ãŒã“ã“ã«å…¥ã‚Šã¾ã™ã€‚æœ¬äººã®ã‚³ãƒ¡ãƒ³ãƒˆï¼š${user.comment}"
                            </p>
                        </div>
                        <div class="relative">
                            <span class="absolute -left-[41px] top-1 w-5 h-5 rounded-full border-4 border-white bg-secondary-400"></span>
                            <h4 class="font-bold text-secondary-800 text-lg">å…¥ç¤¾: ${user.role}</h4>
                            <p class="text-sm text-secondary-600 mt-1">æ–°å’/ä¸­é€”ã¨ã—ã¦å…¥ç¤¾ã€‚åˆæœŸç ”ä¿®ã‚’çµŒã¦é…å±ã€‚</p>
                        </div>
                    </div>
                </div>

            </div>
        `;
    </script>
</body>
</html>